<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Sign Up - U.L.B.C</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/global.css">
</head>

<body>
  <script type="module" src="/navbar.js"></script>
  <div class="container">
    <div class="row justify-content-center mt-5">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h3 class="card-title mb-4">Create an Account</h3>
            <form>
              <div class="form-group"><label for="email">Email address</label><input type="email" class="form-control"
                  id="email" aria-describedby="emailHelp" placeholder="Enter email" /></div>
              <div class="form-group"><label for="password">Password</label><input onfocus="this.type='text'" onblur="this.type='password'" type="password" class="form-control"
                  id="password" placeholder="Password" /></div>
              <div class="form-group"><label for="confirmPassword">Confirm Password</label><input onfocus="this.type='text'" onblur="this.type='password'" type="password"
                  class="form-control" id="confirmPassword" placeholder="Confirm Password" /></div>
              <div class="alert alert-danger" role="alert" style="display:none;" id="error-message">Please fix the
                errors in the form.</div>
              <small style="font-size:12px;color:gray;">By signing up, you acknowledge that any member may be kicked out or left unendorsed by the club at any time. The email you sign up with will be used to publicly identify you across the website.</small>
              <button type="submit" class="btn btn-primary btn-block mt-4">Sign Up</button>
            </form>
            <hr />
            <!--<p class="text-center">Or</p>
            <button type="button" class="btn btn-outline-secondary btn-block">Sign Up with Google</button>-->
            <p class="mt-3">Already have an account? <a href="/login/">Log In</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>
    function showError(message) {
      $("#error-message").html(message).show();
    }

    function hideError() {
      $("#error-message").hide();
    }

    function registrationSuccess(anEmail, aPassword) {

    }

    function checkValidity() {
      let email = $("#email").val();
      let password = $("#password").val();
      let confirmPassword = $("#confirmPassword").val();
      let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      let passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;
      if (!emailRegex.test(email)) {
        showError("Please enter a valid email address.");
        return false;
      } if (password.length == 0 || confirmPassword.length == 0) {
        showError("Please enter a password.");
        return false;
      } if (password !== confirmPassword) {
        showError("Passwords do not match.");
        return false;
      } if (!passwordRegex.test(password)) {
        showError("Password must be at least 8 characters long, and contain at least one number, one uppercase letter, and one lowercase letter.");
        return false;
      }

      hideError();
      return true;
    }
    $(function () {
      $("form").on("submit", function (e) {
        e.preventDefault();
        if (checkValidity()) {
          registrationSuccess($("#email").val(), $("#password").val())
        }
      });
    });
  </script>
</body>

</html>